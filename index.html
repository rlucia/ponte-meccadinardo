<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RIDATECI IL PONTE DI MECCADINARDO ‚Äì SP ex SS93</title>
  <meta name="description" content="Iniziativa civica per chiedere trasparenza e tempi certi sul ripristino del ponte di Meccadinardo (SP ex SS93) ‚Äì Provincia di Potenza." />
  <meta property="og:title" content="Ridateci il Ponte di Meccadinardo" />
  <meta property="og:description" content="Chiediamo alla Provincia di Potenza tempi chiari e aggiornamenti pubblici sulla riapertura." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://via.placeholder.com/1200x630.png?text=Ponte+di+Meccadinardo" />
  <meta property="og:locale" content="it_IT" />
  <style>
    :root{
      --bg:#0b1220;--fg:#eaf0ff;--muted:#b6c2ff;--accent:#7bb6ff;--warn:#ffd166;--danger:#ff6666;--ok:#66ffa6;--card:#121a2b;--edge:#1a2742
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,sans-serif}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{max-width:1100px;margin:0 auto;padding:24px}
    header{padding:64px 24px 32px;background:linear-gradient(180deg,rgba(123,182,255,.18),transparent)}
    header .title{font-size:clamp(28px,5vw,48px);font-weight:800;margin:0 0 12px}
    header .subtitle{font-size:clamp(16px,3.2vw,22px);color:var(--muted);max-width:900px}
    .cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px;margin:28px 0}
    .card{background:linear-gradient(180deg,var(--card),var(--edge));border:1px solid rgba(255,255,255,.06);border-radius:16px;padding:18px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    .kpi{font-size:34px;font-weight:800}
    .kpi small{font-weight:600;color:var(--muted);font-size:13px}
    .btn{display:inline-block;padding:12px 18px;border-radius:999px;background:var(--accent);color:#081427;font-weight:800;box-shadow:0 8px 20px rgba(123,182,255,.35)}
    .btn.secondary{background:transparent;color:var(--accent);border:1px solid var(--accent)}
    section{padding:32px 24px}
    h2{margin:0 0 16px;font-size:26px}
    p.lead{color:var(--muted)}
    .two{display:grid;grid-template-columns:1.2fr .8fr;gap:20px}
    .two>div{min-width:0}
    .map{width:100%;height:360px;border-radius:14px;overflow:hidden}
    .timeline{position:relative;margin:12px 0;padding-left:18px}
    .timeline::before{content:"";position:absolute;left:8px;top:0;bottom:0;width:2px;background:rgba(255,255,255,.12)}
    .timeline .t{position:relative;margin:12px 0;padding-left:16px}
    .timeline .t::before{content:"";position:absolute;left:-2px;top:.5em;width:8px;height:8px;border-radius:50%;background:var(--accent);box-shadow:0 0 0 3px rgba(123,182,255,.2)}
    .pill{display:inline-flex;align-items:center;gap:6px;padding:8px 10px;border-radius:999px;background:rgba(255,255,255,.06);font-weight:600}
    .impact-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:14px}
    .quote{background:linear-gradient(180deg,var(--card),var(--edge));border:1px solid rgba(255,255,255,.06);border-radius:14px;padding:14px}
    .quote p{margin:0;color:#d7e0ff}
    .quote .who{margin-top:10px;color:var(--muted);font-size:14px}
    footer{padding:28px 24px;border-top:1px dashed rgba(255,255,255,.14);color:var(--muted)}
    .small{font-size:13px;color:var(--muted)}
    .stack{display:flex;flex-wrap:wrap;gap:10px}
    .contact-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px}
    .code{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;background:rgba(255,255,255,.07);padding:2px 6px;border-radius:6px}
    .routes-section{margin-top:32px}
    .routes-title{margin:0 0 10px;font-size:20px}
    .routes-list{margin-top:18px;display:grid;gap:14px;grid-template-columns:repeat(2,minmax(0,1fr))}
    .route-card{background:linear-gradient(180deg,rgba(123,182,255,.08),rgba(18,26,43,.9));border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:16px;transition:transform .2s ease,border-color .2s ease,box-shadow .2s ease;cursor:pointer}
    .route-card:hover{transform:translateY(-2px);border-color:rgba(123,182,255,.35);box-shadow:0 14px 28px rgba(0,0,0,.32)}
    .route-card:focus-visible{outline:2px solid var(--accent);outline-offset:3px}
    .route-card header{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:8px}
    .route-card h3{margin:0;font-size:18px}
    .badge{display:inline-flex;align-items:center;gap:6px;font-size:12px;font-weight:700;padding:4px 10px;border-radius:999px;background:rgba(123,182,255,.16);color:var(--accent);white-space:nowrap}
    .routes-list p{margin:0;color:#d7e0ff}
    .routes-list ul{margin:10px 0 0 18px;padding:0;color:var(--muted)}
    .routes-list li{margin-bottom:6px}
    .routes-meta{font-size:13px;color:var(--muted);margin-top:10px}
    @media (max-width:900px){.two{grid-template-columns:1fr}}
    @media (max-width:700px){.routes-list{grid-template-columns:1fr}}
  </style>
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />
</head>
<body>
  <header>
    <div class="wrap">
      <p class="pill">üõ£Ô∏è SP ex SS93 ‚Ä¢ Ponte di Meccadinardo</p>
      <h1 class="title">RIDATECI IL PONTE DI MECCADINARDO</h1>
      <p class="subtitle">Dal <span id="date-closure" class="code"></span>, la chiusura immediata disposta dalla Provincia di Potenza crea gravi disagi a famiglie, lavoratori e imprese. Chiediamo <strong>tempi chiari</strong>, un <strong>piano pubblico di intervento</strong> e <strong>aggiornamenti periodici</strong> fino alla riapertura in sicurezza.</p>
      <div class="cards">
        <div class="card">
          <div class="kpi"><span id="days-closed">--</span> <small>giorni di chiusura</small></div>
          <p class="small">Contatore aggiornato automaticamente dalla data di chiusura.</p>
        </div>
        <div class="card">
          <div class="kpi" id="extra-km">+‚Äî km</div>
          <p class="small">Deviazione media stimata per i collegamenti tra le due sponde.</p>
        </div>
        <div class="card">
          <div class="kpi">#RiapriteIlPonte</div>
          <p class="small">Usa l'hashtag nelle condivisioni per dare visibilit√† all'iniziativa.</p>
        </div>
      </div>
      <div class="stack">
        <a class="btn" id="btn-mail" href="#">Scrivi all'Ufficio Viabilit√†</a>
        <a class="btn secondary" id="btn-pec" href="#">Invia PEC al Protocollo</a>
        <a class="btn secondary" href="#firma">Aderisci / Sostieni</a>
      </div>
    </div>
  </header>

  <section class="wrap" id="situazione">
    <div class="two">
      <div>
        <h2>Situazione attuale</h2>
        <p class="lead">Sabato scorso sono arrivate segnalazioni dai cittadini; a seguire i tecnici della Provincia hanno eseguito un sopralluogo e la Provincia di Potenza ha disposto <strong>la chiusura immediata del ponte di Meccadinardo</strong> sulla <strong>SP ex SS93</strong>. Questa pagina raccoglie informazioni, impatti e una richiesta civica: <em>trasparenza, tempi e aggiornamenti</em>.</p>

        <div class="timeline">
          <div class="t"><strong>Segnalazioni dei cittadini</strong> ‚ûù criticit√† riscontrate sul ponte</div>
          <div class="t"><strong>Sopralluogo tecnico</strong> ‚ûù accertamenti della Provincia</div>
          <div class="t"><strong>Ordinanza di chiusura</strong> ‚ûù tutela sicurezza</div>
          <div class="t"><strong>Richiesta pubblica</strong> ‚ûù piano interventi e comunicazioni periodiche</div>
        </div>

        <p class="small">Riferimenti: Ordinanza di chiusura (numero e link quando disponibile), eventuali comunicati dei Comuni interessati.</p>
      </div>

      <div>
        <h2>Mappa e deviazioni</h2>
        <p class="small">Se la tua rotta √® diversa, invia feedback per migliorare la stima.</p>
        <div id="map" class="map" role="application" aria-label="Mappa interattiva del ponte di Meccadinardo"></div>
      </div>
    </div>

    <div class="routes-section">
      <h3 class="routes-title">Percorsi alternativi via SS658 (Dragonetti)</h3>
      <p class="small">Le tratte suggerite evitano il ponte di Meccadinardo e sfruttano lo svincolo della SS658 a Dragonetti.</p>
      <div id="routes" class="routes-list" aria-live="polite"></div>
      <p class="small">Mappa interattiva realizzata con <span class="code">Leaflet.js</span> e dati ¬© OpenStreetMap contributors.</p>
    </div>
  </section>

  <section class="wrap" id="impatto">
    <h2>Impatto sulla comunit√†</h2>
    <div class="impact-grid">
      <div class="quote"><p>¬´Per andare e tornare dal lavoro impiego 20 minuti in pi√π al giorno.¬ª</p><div class="who">‚Äì Lavoratrice pendolare</div></div>
      <div class="quote"><p>¬´Consegne ritardate e costi extra di carburante.¬ª</p><div class="who">‚Äì Corriere espresso</div></div>
      <div class="quote"><p>¬´I servizi di trasporto pubblico devono allungare il percorso.¬ª</p><div class="who">‚Äì Cittadino</div></div>
      <div class="quote"><p>¬´Scuolabus, il percorso alternativo sulla strada comunale √® oggettivamente pericoloso.¬ª</p><div class="who">‚Äì Genitore</div></div>
    </div>
  </section>

  <section class="wrap" id="chiediamo">
    <h2>Cosa chiediamo</h2>
    <ul>
      <li>Pubblicare un <strong>piano di intervento</strong> con fasi e <strong>tempi indicativi</strong>.</li>
      <li>Istituire un <strong>aggiornamento settimanale</strong> sullo stato (sito, social o albo pretorio).</li>
      <li>Definire e comunicare <strong>percorsi alternativi ufficiali</strong> con segnaletica provvisoria.</li>
      <li>Indicare il <strong>RUP</strong> (Responsabile Unico del Procedimento) e i contatti del cantiere.</li>
    </ul>
  </section>

  <section class="wrap" id="contatti">
    <h2>Chi deve rispondere</h2>
    <div class="contact-grid">
      <div class="card">
        <h3 style="margin-top:0">Ufficio Viabilit√† ‚Äì Provincia di Potenza</h3>
        <p class="small">Dirigente (fonte IndicePA): <strong>Ing. Enrico Spera</strong></p>
        <p class="small">Email: <a href="mailto:enrico.spera@provinciapotenza.it">enrico.spera@provinciapotenza.it</a><br>Telefono: <a href="tel:+390971417252">0971 417252</a></p>
      </div>
      <div class="card">
        <h3 style="margin-top:0">PEC ‚Äì Provincia di Potenza</h3>
        <p class="small">Protocollo generale</p>
        <p class="small">PEC: <a href="mailto:protocollo@pec.provinciapotenza.it">protocollo@pec.provinciapotenza.it</a></p>
      </div>
      <div class="card">
        <h3 style="margin-top:0">Indirizzo politico</h3>
        <p class="small">Presidente della Provincia</p>
        <p class="small"><a href="https://archivio.provincia.potenza.it/provincia/section.jsp?sec=100103">Christian Giordano</a></p>
      </div>
    </div>
    <p class="small">Nota: i referenti di progetto (RUP, DL) saranno aggiunti quando pubblicati negli atti.</p>
  </section>

  <section class="wrap" id="firma">
    <h2>Aderisci / Sostieni</h2>
    <p class="lead">Unisci la tua voce. Compila inviaci la tua adesione qui sotto oppure firma la petizione su Change.org.</p>
    <!-- Opzione 1: Form semplice via mailto. Per raccolte strutturate usa Google Forms/Change.org -->
    <p>
      <a class="btn" id="btn-adesione" href="#">Invia la tua adesione</a>
      <a class="btn secondary" target="_blank" rel="noopener" href="https://www.change.org/ridateci_il_ponte_di_meccadinardo">Vai su Change.org</a>
    </p>
    <p class="small">Se preferisci, scrivi a <a href="mailto:comitato.ponte.meccadinardo@iscanet.com">comitato.ponte.meccadinardo@iscanet.com</a></p>
  </section>

  <section class="wrap" id="aggiornamenti">
    <h2>Aggiornamenti</h2>
    <ul id="updates"></ul>
  </section>

  <footer class="wrap">
    <p class="small">Sito civico senza fini di lucro. Dati personali: evita di inviare informazioni sensibili. ¬© <span id="year"></span> Comitato cittadino spontaneo per il Ponte di Meccadinardo.</p>
  </footer>

  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>
  <script>
    // === CONFIGURAZIONE RAPIDA ===
    // 1) Imposta qui la data di chiusura (ISO YYYY-MM-DD)
    const CLOSURE_DATE = '2025-10-24';

    // 2) Stima deviazione media in km (modifica secondo i percorsi locali)
    const EST_EXTRA_KM = 5;
    
    // 3) Geografia (se vuoi usarla in futuro per calcoli o per Leaflet)
    const BRIDGE_COORDS = { lat: 40.810472, lon: 15.719196 };

    const ROUTES = [
      {
        id: 'filiano-lagopesole',
        name: 'Filiano ‚Üî Lagopesole',
        color: '#7bb6ff',
        summary: 'Percorso alternativo passando per lo svincolo Dragonetti della SS658, senza attraversare Meccadinardo.',
        path: [
          [40.81015750700999,15.706436998186213],
          [40.81913612810251, 15.703508],
          [40.824592300919825, 15.706907],
          [40.825254805630486,15.71553325833936],
          [40.83324331192252,15.71452900159172],
          [40.84204903764827,15.71120722927267],
          [40.82935981471593,15.721790719514818],
          [40.82280007966185,15.737368989473314],
          [40.81169251436635,15.74719660330388],
          [40.799868384224325,15.749556947236986],
          [40.79713943963404,15.74745409536931],
          [40.799608489573,15.740244317537279],
          [40.799608489573,15.740244317537279]
        ],
        keyStops: [
          { label: 'Filiano', coords: [40.81015750700999,15.706436998186213] },
          { label: 'Svincolo SS658 Dragonetti', coords: [40.840994063114216,15.712241630070247] },
          { label: 'Lagopesole', coords: [40.80486518745766,15.733486387874368] }
        ],
        instructions: [
          'Da Filiano scendi verso la SP.ex.S.S.93 e poi all\'incrocio prendi la SP75 fino allo svincolo di Dragonetti.',
          'Immettiti sulla SS658 in direzione nord (Potenza).',
          'Esci a Lagopesole e raggiungi il centro abitato seguendo la viabilit√† locale.',
          'Per il rientro verso Filiano usa lo stesso innesto SS658, invertendo il senso di marcia.'
        ],
        distance: '‚âà 13 km',
        travelTime: '15 minuti'
      },
      {
        id: 'filiano-potenza',
        name: 'Filiano ‚Üî Potenza',
        color: '#66ffa6',
        summary: 'Itinerario consigliato che utilizza la SS658 verso sud, prendendo lo svincolo Dragonetti per raggiungere Potenza.',
        path: [
          [40.81015750700999,15.706436998186213],
          [40.81913612810251, 15.703508],
          [40.824592300919825, 15.706907],
          [40.825254805630486,15.71553325833936],
          [40.83324331192252,15.71452900159172],
          [40.84204903764827,15.71120722927267],
          [40.82935981471593,15.721790719514818],
          [40.82280007966185,15.737368989473314],
          [40.81169251436635,15.74719660330388],
          [40.7868074188661,15.763161111360521],
          [40.759717322765255,15.801868549569305],
          [40.69388902088258,15.824666673522136]
        ],
        keyStops: [
          { label: 'Filiano', coords: [40.81015750700999,15.706436998186213] },
          { label: 'Svincolo SS658 Dragonetti', coords: [40.840994063114216,15.712241630070247] },
          { label: 'Potenza', coords: [40.63974024097756,15.806247403843162] }
        ],
        instructions: [
          'Raggiungi Dragonetti da Filiano lungo la SP75 e prendi la rampa per la SS658.',
          'Segui la SS658 verso Potenza, restando sulla superstrada e oltrepassando gli svincoli intermedi.',
          'Esci a Potenza (svincolo Potenza Nord o successivi) per raggiungere il capoluogo senza attraversare Meccadinardo.',
          'In direzione opposta, segui le indicazioni per Melfi/Filiano rientrando sulla SS658 da Potenza.'
        ],
        distance: '‚âà 38 km',
        travelTime: '32‚Äì35 minuti'
      },
      {
        id: 'iscalunga-potenza',
        name: 'Zona Artigianale D2 (Iscalunga) ‚Üî Potenza',
        color: '#ffd166',
        summary: 'Dal polo produttivo D2 conviene raggiungere rapidamente Dragonetti e proseguire sulla SS658 verso Potenza.',
        path: [
          [40.829320771009755,15.700420757352017],
          [40.8222612442146,15.705338336234199],
          [40.82489802286816,15.70851368716955],
          [40.82391987527615,15.711745239006433],
          [40.82557846485828,15.715229694900096],
          [40.83293529802583,15.714808188138761],
          [40.84199201193783,15.711408033597358],
          [40.83293529802583,15.718180242229437],
          [40.81857943611322,15.741953344387198],
          [40.78187811585775,15.780013729615106],
          
        ],
        keyStops: [
          { label: 'Zona Industriale D2 ‚Äì Iscalunga', coords: [40.82863912816275,15.70103434757037] },
          { label: 'Svincolo SS658 Dragonetti', coords: [40.840994063114216,15.712241630070247] },
          { label: 'Potenza', coords: [40.63974024097756,15.806247403843162] }
        ],
        instructions: [
          'Dalla zona D2 imbocca via Iscalunga/SP8 verso Dragonetti evitando l‚Äôarea del ponte.',
          'Entrando sulla SS658 mantieni la direzione Potenza, sfruttando la superstrada per l‚Äôintero tragitto.',
          'Esci a Potenza Nord (o allo svincolo pi√π utile) e prosegui sulla viabilit√† urbana.',
          'Per tornare alla zona D2 ripercorri la SS658 verso Melfi fino allo svincolo Dragonetti.'
        ],
        distance: '‚âà 34 km',
        travelTime: '28‚Äì30 minuti'
      }
    ];

    // 4) Contatti: aggiorna i mailto per pulsanti precompilati
    const EMAIL_UFFICIO = 'enrico.spera@provinciapotenza.it';
    const EMAIL_PEC = 'protocollo@pec.provinciapotenza.it';
    const CC_POLITICO = '';

    // 5) Aggiornamenti (mostrati in ordine inverso)
    const UPDATES = [
      { date: '2025-10-29', text: 'Online la raccolta firme su Change.org.' },
      { date: '2025-10-29', text: 'Online il sito civico. Raccolta adesioni aperta.' },
      { date: '2025-10-24', text: 'Ordinanza di chiusura del ponte di Meccadinardo (in attesa del numero ufficiale).' }
    ];

    // === LOGICA PAGINA ===
    const fmt = (d)=> new Date(d).toLocaleDateString('it-IT', { day:'2-digit', month:'long', year:'numeric' });

    function updateCounters(){
      const start = new Date(CLOSURE_DATE);
      const now = new Date();
      const ms = now - start;
      const days = Math.max(0, Math.floor(ms / (1000*60*60*24)));
      document.getElementById('days-closed').textContent = days.toString();
      document.getElementById('date-closure').textContent = fmt(CLOSURE_DATE);
      document.getElementById('extra-km').textContent = `+${EST_EXTRA_KM} km`;
    }

    function renderUpdates(){
      const ul = document.getElementById('updates');
      ul.innerHTML = '';
      [...UPDATES].sort((a,b)=> (a.date<b.date?1:-1)).forEach(u=>{
        const li = document.createElement('li');
        li.innerHTML = `<span class="code">${fmt(u.date)}</span> ‚Äì ${u.text}`;
        ul.appendChild(li);
      });
    }

    function buildMailto(){
      const subj = encodeURIComponent('Ponte di Meccadinardo ‚Äì richiesta tempi e aggiornamenti pubblici');
      const body = encodeURIComponent(
`Gentile Ufficio Viabilit√† della Provincia di Potenza,

in qualit√† di cittadina/o chiedo cortesemente di conoscere:
1) le fasi e i tempi indicativi per il ripristino della sicurezza del ponte di Meccadinardo (SP ex SS93),
2) la modalit√† con cui saranno pubblicati aggiornamenti periodici e percorsi alternativi ufficiali.

La chiusura, disposta in data ${fmt(CLOSURE_DATE)}, incide in modo rilevante su famiglie, lavoratori e imprese. Vi chiediamo trasparenza e comunicazione programmata.

Cordiali saluti,
[Nome Cognome]
[Comune]
`);
      document.getElementById('btn-mail').href = `mailto:${EMAIL_UFFICIO}${CC_POLITICO?('%2C'+CC_POLITICO):''}?subject=${subj}&body=${body}`;
      document.getElementById('btn-pec').href = `mailto:${EMAIL_PEC}?subject=${subj}&body=${body}`;

      const subj2 = encodeURIComponent('Adesione iniziativa civica ‚Äì Ponte di Meccadinardo');
      const body2 = encodeURIComponent(
`Aderisco all'iniziativa civica per chiedere tempi chiari e aggiornamenti sulla riapertura del ponte di Meccadinardo.

Nome Cognome:
Comune:
Contatto (facoltativo):
Note:
`);
      document.getElementById('btn-adesione').href = `mailto:comitato.ponte.meccadinardo@iscanet.com?subject=${subj2}&body=${body2}`;
    }

    let MAP_INSTANCE;

    function resetRouteStyles(){
      ROUTES.forEach(route=>{
        if(route.layer){
          route.layer.setStyle(route.layerOptions);
        }
      });
    }

    function highlightRoute(route){
      resetRouteStyles();
      if(route.layer){
        route.layer.setStyle({ color: route.color, weight: route.layerOptions.weight + 2, opacity: 1 });
      }
    }

    function focusRoute(route){
      if(route.layer && MAP_INSTANCE){
        MAP_INSTANCE.flyToBounds(route.layer.getBounds().pad(0.12), { duration: 0.6 });
      }
    }

    function initMap(){
      MAP_INSTANCE = L.map('map', {
        scrollWheelZoom: false,
        attributionControl: false
      }).setView([BRIDGE_COORDS.lat, BRIDGE_COORDS.lon], 13);

      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution:
          '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(MAP_INSTANCE);

      const featureGroup = L.featureGroup().addTo(MAP_INSTANCE);

      L.marker([BRIDGE_COORDS.lat, BRIDGE_COORDS.lon]).addTo(MAP_INSTANCE).bindPopup(
        '<strong>Ponte di Meccadinardo</strong><br />SP ex SS93'
      );

      ROUTES.forEach(route=>{
        route.layerOptions = { color: route.color, weight: 5, opacity: .85 };
        route.layer = L.polyline(route.path, { ...route.layerOptions, lineJoin:'round', lineCap:'round' }).addTo(MAP_INSTANCE);
        route.layer.bindPopup(`<strong>${route.name}</strong><br />Percorso alternativo tramite SS658 a Dragonetti.`);
        featureGroup.addLayer(route.layer);

        route.markers = route.keyStops.map((stop, index)=>{
          const marker = L.circleMarker(stop.coords, {
            radius: index === 1 ? 7 : 5,
            color: route.color,
            weight: 2,
            fillColor: route.color,
            fillOpacity: index === 1 ? 0.9 : 0.7
          }).addTo(MAP_INSTANCE);
          marker.bindTooltip(stop.label, { direction: 'top', offset: [0, -8] });
          featureGroup.addLayer(marker);
          return marker;
        });
      });

      MAP_INSTANCE.fitBounds(featureGroup.getBounds().pad(0.2));

      L.control.attribution({ prefix: false }).addTo(MAP_INSTANCE);
    }

    function renderRoutes(){
      const container = document.getElementById('routes');
      if(!container) return;
      container.innerHTML = '';

      ROUTES.forEach(route=>{
        const card = document.createElement('article');
        card.className = 'route-card';
        card.setAttribute('data-route', route.id);
        card.setAttribute('tabindex', '0');
        card.innerHTML = `
          <header>
            <h3>${route.name}</h3>
            <span class="badge">SS658 ‚Ä¢ Dragonetti</span>
          </header>
          <p>${route.summary}</p>
          <ul>${route.instructions.map(step=>`<li>${step}</li>`).join('')}</ul>
          <p class="routes-meta">Distanza stimata: ${route.distance} ‚Ä¢ Tempo medio: ${route.travelTime}</p>
        `;

        card.addEventListener('mouseenter', ()=>highlightRoute(route));
        card.addEventListener('mouseleave', resetRouteStyles);
        card.addEventListener('focus', ()=>highlightRoute(route));
        card.addEventListener('blur', resetRouteStyles);
        card.addEventListener('click', ()=>{
          highlightRoute(route);
          focusRoute(route);
        });
        card.addEventListener('keydown', (evt)=>{
          if(evt.key === 'Enter' || evt.key === ' '){
            evt.preventDefault();
            highlightRoute(route);
            focusRoute(route);
          }
        });

        container.appendChild(card);
      });
    }

    function init(){
      updateCounters();
      renderUpdates();
      buildMailto();
      document.getElementById('year').textContent = new Date().getFullYear();
      initMap();
      renderRoutes();
    }

    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
